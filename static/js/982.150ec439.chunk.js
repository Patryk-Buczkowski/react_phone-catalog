"use strict";(self.webpackChunkreact_phone_catalog=self.webpackChunkreact_phone_catalog||[]).push([[982],{982:(a,t,c)=>{c.r(t),c.d(t,{Cart:()=>T});var r=c(43);const e="Cart_cart__ompxi",_="Cart_cart__title__X9quN",s="Cart_cart__items_container__9OC5v",n="Cart_cart__items_container__paragraph__Dl+pJ",i="Cart_cart__sum_container__cs1dF",l="Cart_cart__sum_container__total_price__FzB57",o="Cart_cart__sum_container__paragraph__SZDBn",d="Cart_cart__sum_container__separator__bW8D-",C="Cart_cart__sum_container__checkout__BaIIl",u="Cart_cart__dialog__80P8B",m="Cart_cart__dialog__button__a2s1X",h="Cart_cart__dialog__button_close__vlmlX",p="Cart_cart__dialog__title__TxcG3";var x=c(3);const j="CardCart_cartCard__bV8+b",N="CardCart_cartCard__product__34E0G",g="CardCart_cartCard__product__closeButton__wRdRQ",v="CardCart_spin__JScZi",y="CardCart_cartCard__product__img__BEZ6-",b="CardCart_cartCard__product__paragraph__UZdFq",k="CardCart_cartCard__container__saDBP",f="CardCart_cartCard__container__quantity__bW-Z8",S="CardCart_cartCard__container__quantity__item__zUPKc",q="CardCart_scale__VMj6j",D="CardCart_border__z0Z2s",B="CardCart_cartCard__container__quantity__input__s+FrX",w="CardCart_cartCard__container__price__Q8yRb";var E=c(579);const I=a=>{let{product:t,setTotalQuantity:c,setTotalPrice:e}=a;const{setCart:_,cart:s}=(0,r.useContext)(x.L),[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(t.quantity),[d,C]=(0,r.useState)(l),[u,m]=(0,r.useState)(l*t.priceDiscount);(0,r.useEffect)((()=>{e((a=>a+u)),c((a=>a+l))}),[]),(0,r.useEffect)((()=>{e((a=>a+t.priceDiscount*(l-t.quantity)))}),[u,l]),(0,r.useEffect)((()=>{c((a=>a+l-t.quantity)),m(l*t.priceDiscount),_((a=>{const c=a.map((a=>a.id===t.id?{...a,quantity:l}:a));return localStorage.setItem("cart",JSON.stringify(c)),c}))}),[u,l]);const h=()=>{i(!0)};return(0,E.jsxs)("div",{className:j,children:[(0,E.jsxs)("div",{className:N,children:[(0,E.jsx)("img",{onClick:()=>(a=>{const t=s.find((t=>t.id===a));_((t=>{const c=t.filter((t=>t.id!==a));return localStorage.setItem("cart",JSON.stringify(c)),c})),t&&(e((a=>a-t.quantity*t.priceDiscount)),c((a=>a-t.quantity)))})(t.id),className:"".concat(g," ").concat(v),src:".\\img\\svg\\close.svg",alt:"close button"}),(0,E.jsx)("img",{className:y,src:"./".concat(t.images[0]),alt:"product image"}),(0,E.jsx)("p",{className:b,children:t.id})]}),(0,E.jsxs)("div",{className:k,children:[(0,E.jsxs)("div",{className:f,children:[(0,E.jsx)("div",{onClick:()=>{o((a=>a+1))},className:"".concat(S," ").concat(D," ").concat(q),children:(0,E.jsx)("p",{className:q,children:"+"})}),(0,E.jsx)("div",{onClick:h,onDoubleClick:h,className:S,children:n?(0,E.jsx)("input",{className:B,value:d,onChange:a=>C(+a.target.value),type:"number",min:1,onKeyDown:a=>{"Enter"===a.key&&(o(d),i(!1))},onBlur:()=>{o(d),i(!1)}}):l}),(0,E.jsx)("div",{onClick:()=>{o((a=>1===a?1:a-1))},className:"".concat(S," ").concat(D," ").concat(q),children:(0,E.jsx)("p",{className:q,children:"-"})})]}),(0,E.jsxs)("div",{className:w,children:["$",u]})]})]})},T=()=>{const{cart:a,setCart:t}=(0,r.useContext)(x.L),[c,j]=(0,r.useState)(0),[N,g]=(0,r.useState)(0),v=(0,r.useRef)(null),y=()=>{var a;null===(a=v.current)||void 0===a||a.close()};return(0,E.jsxs)("div",{className:e,children:[(0,E.jsx)("h1",{className:_,children:"Cart"}),(0,E.jsx)("div",{className:s,children:a.length>0?a.map((a=>(0,E.jsx)(I,{setTotalPrice:j,setTotalQuantity:g,product:a},a.id))):(0,E.jsx)("p",{className:n,children:"Your cart is empty"})}),a.length>0&&(0,E.jsxs)("div",{className:i,children:[(0,E.jsx)("p",{className:l,children:"$".concat(c)}),(0,E.jsx)("p",{className:o,children:"Total for ".concat(N," items")}),(0,E.jsx)("div",{className:d}),(0,E.jsx)("div",{onClick:()=>{var a;null===(a=v.current)||void 0===a||a.showModal()},className:C,children:"Checkout"})]}),(0,E.jsxs)("dialog",{className:u,ref:v,children:[(0,E.jsx)("button",{className:h,onClick:y,children:"Close"}),(0,E.jsx)("h1",{className:p,children:"Checkout is not implemented yet. Do you want to clear the Cart?"}),(0,E.jsx)("button",{onClick:()=>{t([]),j(0),g(0),y();const a=document.getElementById("header");a&&a.scrollIntoView({behavior:"smooth"})},className:m,children:"Confirm"}),(0,E.jsx)("button",{onClick:y,className:m,children:"Cancel"})]})]})}}}]);
//# sourceMappingURL=982.150ec439.chunk.js.map