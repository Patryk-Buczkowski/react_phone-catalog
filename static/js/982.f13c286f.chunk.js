"use strict";(self.webpackChunkreact_phone_catalog=self.webpackChunkreact_phone_catalog||[]).push([[982],{982:(a,t,r)=>{r.r(t),r.d(t,{Cart:()=>I});var e=r(43);const _="Cart_cart__ompxi",s="Cart_cart__title__X9quN",c="Cart_cart__items_container__9OC5v",n="Cart_cart__items_container__paragraph__Dl+pJ",i="Cart_cart__sum_container__cs1dF",l="Cart_cart__sum_container__total_price__FzB57",o="Cart_cart__sum_container__paragraph__SZDBn",d="Cart_cart__sum_container__separator__bW8D-",C="Cart_cart__sum_container__checkout__BaIIl",u="Cart_cart__dialog__80P8B",m="Cart_cart__dialog__button__a2s1X",h="Cart_cart__dialog__button_close__vlmlX",p="Cart_cart__dialog__title__TxcG3";var x=r(3);const j="CardCart_cartCard__bV8+b",N="CardCart_cartCard__product__34E0G",g="CardCart_cartCard__product__closeButton__wRdRQ",v="CardCart_spin__JScZi",y="CardCart_cartCard__product__img__BEZ6-",b="CardCart_cartCard__product__paragraph__UZdFq",k="CardCart_cartCard__container__saDBP",f="CardCart_cartCard__container__quantity__bW-Z8",$="CardCart_cartCard__container__quantity__item__zUPKc",S="CardCart_scale__VMj6j",q="CardCart_border__z0Z2s",D="CardCart_cartCard__container__quantity__input__s+FrX",B="CardCart_cartCard__container__price__Q8yRb";var w=r(579);const E=a=>{let{product:t,setTotalQuantity:r,setTotalPrice:_}=a;const{setCart:s,cart:c}=(0,e.useContext)(x.L),[n,i]=(0,e.useState)(!1),[l,o]=(0,e.useState)(t.quantity),[d,C]=(0,e.useState)(l),[u,m]=(0,e.useState)(l*t.priceDiscount);(0,e.useEffect)((()=>{_((a=>a+u)),r((a=>a+l))}),[]),(0,e.useEffect)((()=>{_((a=>a+t.priceDiscount*(l-t.quantity)))}),[u,l]),(0,e.useEffect)((()=>{r((a=>a+l-t.quantity)),m(l*t.priceDiscount),s((a=>{const r=a.map((a=>a.id===t.id?{...a,quantity:l}:a));return localStorage.setItem("cart",JSON.stringify(r)),r}))}),[u,l]);const h=()=>{i(!0)};return(0,w.jsxs)("div",{className:j,children:[(0,w.jsxs)("div",{className:N,children:[(0,w.jsx)("img",{onClick:()=>(a=>{const t=c.find((t=>t.id===a));s((t=>{const r=t.filter((t=>t.id!==a));return localStorage.setItem("cart",JSON.stringify(r)),r})),t&&(_((a=>a-t.quantity*t.priceDiscount)),r((a=>a-t.quantity)))})(t.id),className:`${g} ${v}`,src:".\\img\\svg\\close.svg",alt:"close button"}),(0,w.jsx)("img",{className:y,src:`./${t.images[0]}`,alt:"product image"}),(0,w.jsx)("p",{className:b,children:t.id})]}),(0,w.jsxs)("div",{className:k,children:[(0,w.jsxs)("div",{className:f,children:[(0,w.jsx)("div",{onClick:()=>{o((a=>a+1))},className:`${$} ${q} ${S}`,children:(0,w.jsx)("p",{className:S,children:"+"})}),(0,w.jsx)("div",{onClick:h,onDoubleClick:h,className:$,children:n?(0,w.jsx)("input",{className:D,value:d,onChange:a=>C(+a.target.value),type:"number",min:1,onKeyDown:a=>{"Enter"===a.key&&(o(d),i(!1))},onBlur:()=>{o(d),i(!1)}}):l}),(0,w.jsx)("div",{onClick:()=>{o((a=>1===a?1:a-1))},className:`${$} ${q} ${S}`,children:(0,w.jsx)("p",{className:S,children:"-"})})]}),(0,w.jsxs)("div",{className:B,children:["$",u]})]})]})},I=()=>{const{cart:a,setCart:t}=(0,e.useContext)(x.L),[r,j]=(0,e.useState)(0),[N,g]=(0,e.useState)(0),v=(0,e.useRef)(null),y=()=>{var a;null===(a=v.current)||void 0===a||a.close()};return(0,w.jsxs)("div",{className:_,children:[(0,w.jsx)("h1",{className:s,children:"Cart"}),(0,w.jsx)("div",{className:c,children:a.length>0?a.map((a=>(0,w.jsx)(E,{setTotalPrice:j,setTotalQuantity:g,product:a},a.id))):(0,w.jsx)("p",{className:n,children:"Your cart is empty"})}),a.length>0&&(0,w.jsxs)("div",{className:i,children:[(0,w.jsx)("p",{className:l,children:`$${r}`}),(0,w.jsx)("p",{className:o,children:`Total for ${N} items`}),(0,w.jsx)("div",{className:d}),(0,w.jsx)("div",{onClick:()=>{var a;null===(a=v.current)||void 0===a||a.showModal()},className:C,children:"Checkout"})]}),(0,w.jsxs)("dialog",{className:u,ref:v,children:[(0,w.jsx)("button",{className:h,onClick:y,children:"Close"}),(0,w.jsx)("h1",{className:p,children:"Checkout is not implemented yet. Do you want to clear the Cart?"}),(0,w.jsx)("button",{onClick:()=>{t([]),j(0),g(0),y();const a=document.getElementById("header");a&&a.scrollIntoView({behavior:"smooth"})},className:m,children:"Confirm"}),(0,w.jsx)("button",{onClick:y,className:m,children:"Cancel"})]})]})}}}]);
//# sourceMappingURL=982.f13c286f.chunk.js.map